== Magento ===================

This is a simple gem which wraps Magento XMLRPC calls with Ruby classes.
This allows for you to integrate your Magento Shopping Cart into your Rails Application.
This is not fully tested and some functionality is a WIP.

The full Magento Core Api is available at http://www.magentocommerce.com/support/magento_core_api

The current supported resources are:

  Category
  Country
  Customer
  CustomerAddress
  CustomerGroups
  Inventory
  Invoice
  Order
  Product
  ProductImages
  ProductTypes
  Region
  Shipment

== Usage =====================

Edit config/config.yml and add your magento api username and api key to the file.


== Issues ====================

A patch needs to be applied to XMLRPC for this to work.

Locate the xmlrpc gem on your system.

Edit the parser.rb file

Around line 504

change to this

  def startElement(name, attrs=[])
    @data = nil
    case name
      when "value"
        @value = nil
        when "nil"
        raise "wrong/unknown XML-RPC type 'nil'" unless Config::ENABLE_NIL_PARSER
        @value = :nil 
      when "array"
        @val_stack << @values
        @values = []
      when "struct"
        @names << @name
        @name = []

        @structs << @struct
        @struct = {} 
    end
  end
  
The key change is 
  unless Config::ENABLE_NIL_PARSER

This will prevent the parser from raising exceptions when nil is returned.

This allows for nil values to be handled by the parser.
This bug exists due to the Magento api's handling of the responses.
